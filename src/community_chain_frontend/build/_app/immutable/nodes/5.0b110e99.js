import{s as ce,d as ae,o as oe,r as fe,c as T}from"../chunks/scheduler.0efe6932.js";import{S as _e,i as ue,s as S,g as $,A as de,f as u,c as q,h as C,j as w,x as O,k as y,a as g,y as m,t as A,b as z,d as E,p as j,m as H,e as M,n as N,z as J,o as K,r as Q,u as R,v as W,w as X}from"../chunks/index.4ebdcf9a.js";import{e as F,u as re,o as se,A as ne}from"../chunks/ActivityCard.c09a1b52.js";import{g as he}from"../chunks/navigation.2c431d70.js";import{e as pe,f as me}from"../chunks/activities.f28ac22d.js";import{i as ve}from"../chunks/auth.212dabd5.js";import{L as ke}from"../chunks/LoadingSpinner.cd21ff20.js";function ee(o,t,e){const r=o.slice();return r[10]=t[e],r}function te(o,t,e){const r=o.slice();return r[10]=t[e],r}function be(o){let t,e,r,a=o[0].length+"",s,c,i,l,n,f,I=o[1].length+"",d,h,b,B,v,k,P,D,G,Y;const Z=[Ce,$e],V=[];function x(_,p){return _[4]==="created"?0:_[4]==="assigned"?1:-1}return~(v=x(o))&&(k=V[v]=Z[v](o)),{c(){t=$("div"),e=$("div"),r=H("作成した活動 ("),s=H(a),c=H(")"),l=S(),n=$("div"),f=H("参加中の活動 ("),d=H(I),h=H(")"),B=S(),k&&k.c(),P=M(),this.h()},l(_){t=C(_,"DIV",{class:!0});var p=w(t);e=C(p,"DIV",{class:!0});var L=w(e);r=N(L,"作成した活動 ("),s=N(L,a),c=N(L,")"),L.forEach(u),l=q(p),n=C(p,"DIV",{class:!0});var U=w(n);f=N(U,"参加中の活動 ("),d=N(U,I),h=N(U,")"),U.forEach(u),p.forEach(u),B=q(_),k&&k.l(_),P=M(),this.h()},h(){y(e,"class",i=`tab ${o[4]==="created"?"active":""}`),y(n,"class",b=`tab ${o[4]==="assigned"?"active":""}`),y(t,"class","tabs")},m(_,p){g(_,t,p),m(t,e),m(e,r),m(e,s),m(e,c),m(t,l),m(t,n),m(n,f),m(n,d),m(n,h),g(_,B,p),~v&&V[v].m(_,p),g(_,P,p),D=!0,G||(Y=[J(e,"click",o[7]),J(n,"click",o[8])],G=!0)},p(_,p){(!D||p&1)&&a!==(a=_[0].length+"")&&K(s,a),(!D||p&16&&i!==(i=`tab ${_[4]==="created"?"active":""}`))&&y(e,"class",i),(!D||p&2)&&I!==(I=_[1].length+"")&&K(d,I),(!D||p&16&&b!==(b=`tab ${_[4]==="assigned"?"active":""}`))&&y(n,"class",b);let L=v;v=x(_),v===L?~v&&V[v].p(_,p):(k&&(j(),A(V[L],1,1,()=>{V[L]=null}),z()),~v?(k=V[v],k?k.p(_,p):(k=V[v]=Z[v](_),k.c()),E(k,1),k.m(P.parentNode,P)):k=null)},i(_){D||(E(k),D=!0)},o(_){A(k),D=!1},d(_){_&&(u(t),u(B),u(P)),~v&&V[v].d(_),G=!1,fe(Y)}}}function ge(o){let t,e,r,a,s,c="再読み込み",i,l;return{c(){t=$("div"),e=$("p"),r=H(o[3]),a=S(),s=$("button"),s.textContent=c,this.h()},l(n){t=C(n,"DIV",{class:!0});var f=w(t);e=C(f,"P",{});var I=w(e);r=N(I,o[3]),I.forEach(u),a=q(f),s=C(f,"BUTTON",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-iqkgzj"&&(s.textContent=c),f.forEach(u),this.h()},h(){y(s,"class","btn btn-primary"),y(t,"class","alert alert-danger")},m(n,f){g(n,t,f),m(t,e),m(e,r),m(t,a),m(t,s),i||(l=J(s,"click",o[6]),i=!0)},p(n,f){f&8&&K(r,n[3])},i:T,o:T,d(n){n&&u(t),i=!1,l()}}}function ye(o){let t,e,r,a,s="データを読み込み中...",c;return e=new ke({}),{c(){t=$("div"),Q(e.$$.fragment),r=S(),a=$("p"),a.textContent=s,this.h()},l(i){t=C(i,"DIV",{class:!0});var l=w(t);R(e.$$.fragment,l),r=q(l),a=C(l,"P",{"data-svelte-h":!0}),O(a)!=="svelte-ao6p58"&&(a.textContent=s),l.forEach(u),this.h()},h(){y(t,"class","loading")},m(i,l){g(i,t,l),W(e,t,null),m(t,r),m(t,a),c=!0},p:T,i(i){c||(E(e.$$.fragment,i),c=!0)},o(i){A(e.$$.fragment,i),c=!1},d(i){i&&u(t),X(e)}}}function $e(o){let t,e,r,a;const s=[Ee,Ae],c=[];function i(l,n){return l[1].length===0?0:1}return t=i(o),e=c[t]=s[t](o),{c(){e.c(),r=M()},l(l){e.l(l),r=M()},m(l,n){c[t].m(l,n),g(l,r,n),a=!0},p(l,n){let f=t;t=i(l),t===f?c[t].p(l,n):(j(),A(c[f],1,1,()=>{c[f]=null}),z(),e=c[t],e?e.p(l,n):(e=c[t]=s[t](l),e.c()),E(e,1),e.m(r.parentNode,r))},i(l){a||(E(e),a=!0)},o(l){A(e),a=!1},d(l){l&&u(r),c[t].d(l)}}}function Ce(o){let t,e,r,a;const s=[Me,Ie],c=[];function i(l,n){return l[0].length===0?0:1}return t=i(o),e=c[t]=s[t](o),{c(){e.c(),r=M()},l(l){e.l(l),r=M()},m(l,n){c[t].m(l,n),g(l,r,n),a=!0},p(l,n){let f=t;t=i(l),t===f?c[t].p(l,n):(j(),A(c[f],1,1,()=>{c[f]=null}),z(),e=c[t],e?e.p(l,n):(e=c[t]=s[t](l),e.c()),E(e,1),e.m(r.parentNode,r))},i(l){a||(E(e),a=!0)},o(l){A(e),a=!1},d(l){l&&u(r),c[t].d(l)}}}function Ae(o){let t,e=[],r=new Map,a,s=F(o[1]);const c=i=>i[10].id;for(let i=0;i<s.length;i+=1){let l=ee(o,s,i),n=c(l);r.set(n,e[i]=le(n,l))}return{c(){t=$("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=C(i,"DIV",{class:!0});var l=w(t);for(let n=0;n<e.length;n+=1)e[n].l(l);l.forEach(u),this.h()},h(){y(t,"class","grid grid-cols-1 grid-cols-2 grid-cols-3")},m(i,l){g(i,t,l);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null);a=!0},p(i,l){l&2&&(s=F(i[1]),j(),e=re(e,l,c,1,i,s,r,t,se,le,null,ee),z())},i(i){if(!a){for(let l=0;l<s.length;l+=1)E(e[l]);a=!0}},o(i){for(let l=0;l<e.length;l+=1)A(e[l]);a=!1},d(i){i&&u(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function Ee(o){let t,e='<p>参加中の活動はありません。</p> <a href="/" class="btn btn-primary">活動を探す</a>';return{c(){t=$("div"),t.innerHTML=e,this.h()},l(r){t=C(r,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-s8de54"&&(t.innerHTML=e),this.h()},h(){y(t,"class","empty")},m(r,a){g(r,t,a)},p:T,i:T,o:T,d(r){r&&u(t)}}}function le(o,t){let e,r,a;return r=new ne({props:{activity:t[10]}}),{key:o,first:null,c(){e=M(),Q(r.$$.fragment),this.h()},l(s){e=M(),R(r.$$.fragment,s),this.h()},h(){this.first=e},m(s,c){g(s,e,c),W(r,s,c),a=!0},p(s,c){t=s;const i={};c&2&&(i.activity=t[10]),r.$set(i)},i(s){a||(E(r.$$.fragment,s),a=!0)},o(s){A(r.$$.fragment,s),a=!1},d(s){s&&u(e),X(r,s)}}}function Ie(o){let t,e=[],r=new Map,a,s=F(o[0]);const c=i=>i[10].id;for(let i=0;i<s.length;i+=1){let l=te(o,s,i),n=c(l);r.set(n,e[i]=ie(n,l))}return{c(){t=$("div");for(let i=0;i<e.length;i+=1)e[i].c();this.h()},l(i){t=C(i,"DIV",{class:!0});var l=w(t);for(let n=0;n<e.length;n+=1)e[n].l(l);l.forEach(u),this.h()},h(){y(t,"class","grid grid-cols-1 grid-cols-2 grid-cols-3")},m(i,l){g(i,t,l);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(t,null);a=!0},p(i,l){l&1&&(s=F(i[0]),j(),e=re(e,l,c,1,i,s,r,t,se,ie,null,te),z())},i(i){if(!a){for(let l=0;l<s.length;l+=1)E(e[l]);a=!0}},o(i){for(let l=0;l<e.length;l+=1)A(e[l]);a=!1},d(i){i&&u(t);for(let l=0;l<e.length;l+=1)e[l].d()}}}function Me(o){let t,e='<p>作成した活動はありません。</p> <a href="/create" class="btn btn-primary">活動を作成する</a>';return{c(){t=$("div"),t.innerHTML=e,this.h()},l(r){t=C(r,"DIV",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-6xzxcw"&&(t.innerHTML=e),this.h()},h(){y(t,"class","empty")},m(r,a){g(r,t,a)},p:T,i:T,o:T,d(r){r&&u(t)}}}function ie(o,t){let e,r,a;return r=new ne({props:{activity:t[10]}}),{key:o,first:null,c(){e=M(),Q(r.$$.fragment),this.h()},l(s){e=M(),R(r.$$.fragment,s),this.h()},h(){this.first=e},m(s,c){g(s,e,c),W(r,s,c),a=!0},p(s,c){t=s;const i={};c&1&&(i.activity=t[10]),r.$set(i)},i(s){a||(E(r.$$.fragment,s),a=!0)},o(s){A(r.$$.fragment,s),a=!1},d(s){s&&u(e),X(r,s)}}}function Te(o){let t,e,r,a="<h1>マイページ</h1> <p>あなたの活動を管理します</p>",s,c,i,l;const n=[ye,ge,be],f=[];function I(d,h){return d[2]?0:d[3]?1:2}return c=I(o),i=f[c]=n[c](o),{c(){t=S(),e=$("section"),r=$("div"),r.innerHTML=a,s=S(),i.c(),this.h()},l(d){de("svelte-1cq3m46",document.head).forEach(u),t=q(d),e=C(d,"SECTION",{class:!0});var b=w(e);r=C(b,"DIV",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1fnx47c"&&(r.innerHTML=a),s=q(b),i.l(b),b.forEach(u),this.h()},h(){document.title="マイページ - コミュニティチェーン",y(r,"class","header"),y(e,"class","container")},m(d,h){g(d,t,h),g(d,e,h),m(e,r),m(e,s),f[c].m(e,null),l=!0},p(d,[h]){let b=c;c=I(d),c===b?f[c].p(d,h):(j(),A(f[b],1,1,()=>{f[b]=null}),z(),i=f[c],i?i.p(d,h):(i=f[c]=n[c](d),i.c()),E(i,1),i.m(e,null))},i(d){l||(E(i),l=!0)},o(d){A(i),l=!1},d(d){d&&(u(t),u(e)),f[c].d()}}}function we(o,t,e){let r;ae(o,ve,h=>e(9,r=h));let a=[],s=[],c=!0,i=null,l="created";oe(async()=>{if(!r){he("/"),alert("マイページを表示するにはログインが必要です。");return}try{const[h,b]=await Promise.all([pe(),me()]);e(0,a=h),e(1,s=b)}catch(h){e(3,i="データの読み込みに失敗しました。"),console.error(h)}finally{e(2,c=!1)}});function n(h){e(4,l=h)}return[a,s,c,i,l,n,()=>window.location.reload(),()=>n("created"),()=>n("assigned")]}class qe extends _e{constructor(t){super(),ue(this,t,we,Te,ce,{})}}export{qe as component};
